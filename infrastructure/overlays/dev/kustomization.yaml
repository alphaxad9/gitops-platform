# gitops-platform/infrastructure/overlays/dev/kustomization.yaml
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: infrastructure

resources:
  - ../../base

commonLabels:
  environment: dev
  managed-by: gitops

configMapGenerator:
  - name: platform-endpoints
    behavior: merge
    literals:
      - ENVIRONMENT=dev
      - LOG_LEVEL=DEBUG

helmCharts:
  - name: postgresql
    repo: https://charts.bitnami.com/bitnami
    version: 12.x.x
    releaseName: postgresql
    namespace: infrastructure
    valuesFile: values.yaml

  - name: kafka
    repo: https://charts.bitnami.com/bitnami
    version: 22.x.x
    releaseName: kafka
    namespace: infrastructure
    valuesFile: values.yaml

  - name: redis
    repo: https://charts.bitnami.com/bitnami
    version: 17.x.x
    releaseName: redis
    namespace: infrastructure
    valuesFile: values.yaml

  - name: rabbitmq
    repo: https://charts.bitnami.com/bitnami
    version: 12.x.x
    releaseName: rabbitmq
    namespace: infrastructure
    valuesFile: values.yaml

  - name: traefik
    repo: https://helm.traefik.io/traefik
    version: 25.x.x
    releaseName: traefik
    namespace: infrastructure
    valuesFile: values.yaml