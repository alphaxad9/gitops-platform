# gitops-platform/infrastructure/overlays/dev/values-kafka.yaml
# Dev config: Single-node KRaft, minimal resources, Bitnami image

# ✅ DO NOT override image - let chart use bitnami/kafka default
# image: block REMOVED

replicaCount: 1

# ✅ KRaft mode (no Zookeeper) - Bitnami handles this
kraft:
  enabled: true

# ✅ Listeners - Bitnami chart format
listeners:
  client:
    protocol: PLAINTEXT
    containerPort: 9092
  controller:
    protocol: PLAINTEXT
    containerPort: 9093
  interbroker:
    protocol: PLAINTEXT
    containerPort: 9094

# ✅ Persistence - disable for fast dev iteration (enable for staging/prod)
persistence:
  enabled: false  # Dev-only: no PVC needed
  # size: 30Gi  # Uncomment for staging/prod

# ✅ Resources - minimal for dev
resources:
  requests:
    memory: 512Mi
    cpu: 250m
  limits:
    memory: 1Gi
    cpu: 500m

# ✅ Allow plaintext for dev (disable TLS)
tls:
  enabled: false

# ✅ Auto-create topics for dev convenience
autoCreateTopicsEnable: true

# ✅ Logging for debugging
logLevel: DEBUG

# ✅ Metrics (optional, enable if using Prometheus)
metrics:
  enabled: false

# ✅ Security: Use existing secret for credentials if needed
# Bitnami chart supports SASL via existingSecret, but PLAINTEXT is fine for dev
# auth:
#   clientProtocol: plaintext
#   interBrokerProtocol: plaintext