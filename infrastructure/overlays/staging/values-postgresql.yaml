# gitops-platform/infrastructure/overlays/staging/values-postgresql.yaml
# Staging config: balanced between dev and prod

global:
  postgresql:
    auth:
      existingSecret: postgres-credentials

auth:
  existingSecret: postgres-credentials
  secretKeys:
    userPasswordKey: POSTGRES_PASSWORD

architecture: standalone  # ✅ Simpler than prod, but with persistence

primary:
  persistence:
    enabled: true
    size: 30Gi
  resources:
    requests:
      memory: 1Gi
      cpu: 500m
    limits:
      memory: 2Gi
      cpu: 1000m

initdbScripts:
  create-databases.sql: |
    CREATE DATABASE authdb;
    CREATE DATABASE paymentdb;

# ✅ TLS enabled for staging (test prod config)
tls:
  enabled: true
  autoGenerated: true  # ✅ Auto-generate for staging convenience

# ✅ Basic backups (less frequent than prod)
backup:
  enabled: true
  cronJob:
    schedule: "0 4 * * *"  # Daily at 4 AM
    retention: "3d"

metrics:
  enabled: true